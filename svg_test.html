---
title: SVG Test
layout: default
---

<!DOCTYPE html>
<html>
<head>
<!--<link rel="stylesheet" href="toy.css">-->
<script language="JavaScript" type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<div class="area-grid">
  <div class="row-1">
    <div class="functional-cortex" id="visual">
      <div class="area" id="area1"><p>V1</p></div>
      <div class="area" id="area2"><p>TO</p></div>
      <div class="area" id="area3"><p>AT</p></div>
    </div>
    <div class="functional-cortex" id="motor">
      <div class="area" id="area4"><p>PF<sub>L</sub></p></div>
      <div class="area" id="area5"><p>PM<sub>L</sub></p></div>
      <div class="area" id="area6"><p>M1<sub>L</sub></p></div>
    </div>
  </div>
  <div class="row-2">
    <div class="functional-cortex" id="auditory">
      <div class="area" id="area7"><p>A1</p></div>
      <div class="area" id="area8"><p>AB</p></div>
      <div class="area" id="area9"><p>PB</p></div>
    </div>
    <div class="functional-cortex" id="articulatory">
      <div class="area" id="area10"><p>PF<sub>i</sub></p></div>
      <div class="area" id="area11"><p>PM<sub>i</sub></p></div>
      <div class="area" id="area12"><p>M1<sub>i</sub></p></div>
    </div>
  </div>
</div>
<!--Following tutorial: http://xahlee.info/js/js_scritping_svg_basics.html-->
<script>
  function getRandomInt(max) {
    return Math.floor(Math.random() * max);
  }

  {
    const drawArea = ((area, CAList) => {
      // create the svg element
      const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");

      // set width and height
      svg.setAttribute("width", "160");
      svg.setAttribute("height", "160");
      svg.setAttribute("viewBox", "0 0 160 160");
      svg.setAttribute("display", "block");

      // create black neurogrid bg
      const background = document.createElementNS(
        "http://www.w3.org/2000/svg",
        "rect",
      );
      background.setAttribute("width", "160");
      background.setAttribute("height", "160");
      background.setAttribute("fill", "black");
      background.setAttribute("class", "background");

      // attach it to the container
      svg.appendChild(background);
      width = 5;
      height = width;
      oldX = 5;
      oldY = 5;
      for (var i = 0; i < 25; i++) {
        for (var j = 0; j < 25; j++) {
          newX = oldX + (width*j + 1*j);
          newY = oldY + (height*i + 1*i);
          cellID = j + i*25 + 1;
          const cell = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "rect",
          );
          cell.setAttribute("x", String(newX));
          cell.setAttribute("y", String(newY));
          cell.setAttribute("width", String(width));
          cell.setAttribute("height", String(height));
          cell.setAttribute("fill", "Gray");
          cell.setAttribute("id", String(cellID));
          if (CAList.includes(cellID)) {
            cell.setAttribute("fill", "LightGray");
            cell.setAttribute("class", "CA");
          }

          svg.appendChild(cell);
        }
      }

      // attach container to document
      document.getElementById(area).appendChild(svg);
    });

    areas = ["area1", "area2", "area3",
             "area4", "area5", "area6",
             "area7", "area8", "area9",
             "area10", "area11", "area12"];
   for (var i = 0; i < areas.length; i++) {
     drawArea(areas[i], [getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625),getRandomInt(625)]);
   }
  }
</script>

<script type="text/javascript">
  // Parsing a FELIX output text file for area, pattern
  $.ajax({
    url: '../assets/sample_data_ts_thresh_CAs.txt',
    dataType: 'text',
    success: function processData(allText) {
      var dat = new Object();
      var allTextLines = allText.split(/\r\n|\n/);
      var headers = allTextLines[0].split('\t');
      //var lines = []; //alternative solution for full line by line parse
      for (var j=0; j<headers.length; j++) {
        dat[headers[j]] = [];
      }

      for (var i=1; i<allTextLines.length; i++) {
          var data = allTextLines[i].split('\t');
          if (data.length == headers.length) {
              //var tarr = [];
              for (var j=0; j<headers.length; j++) {
                  //tarr.push(headers[j]+":"+data[j]);
                  dat[headers[j]] = dat[headers[j]].concat(data[j]);
                  //tarr.push(data[j]);
              }
              //lines.push(tarr);
          }
      }
      return dat;
    }
  }).done(printData);

  function printData(dat) {

    console.log(dat);
    for (var i = 0; i < 12; i++) {
      var pattern = dat["CA"];
      var pattern = pattern[i];
      console.log(pattern);
    }
  }


</script>

</body>

</html>
